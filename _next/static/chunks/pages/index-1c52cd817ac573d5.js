(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2777)}])},2777:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(5893),i=n(7294),s=n(7568),a=n(655),o=n(4014),c=n(1407),l=n(9764),d=n(1791);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var x=function(){var e=function(){var e=(0,s.Z)((function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,l._m.auth.signOut()];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),t=e.message,console.log("Error when logout",t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(o.v,{as:"div",className:"relative inline-block text-left",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.v.Button,{children:(0,r.jsx)(d.R0,{})})}),(0,r.jsx)(c.u,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsx)(o.v.Items,{className:"absolute right-0 z-10 mt-2 w-24 pl-2 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,r.jsx)("div",{className:"py-1",children:(0,r.jsx)("form",{method:"POST",children:(0,r.jsx)(o.v.Item,{children:function(t){var n=t.active;return(0,r.jsx)("button",{type:"submit",className:u(n?"bg-gray-100 text-gray-900":"text-gray-700","block w-full px-4 py-2 text-left text-sm"),onClick:e,children:"Log out"})}})})})})})]})},f=n(2726),h=n(1163),m=n(2010),p=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],s=(0,m.F)(),a=s.theme,o=s.setTheme,c=s.resolvedTheme;return(0,i.useEffect)((function(){n(!0)}),[]),(0,r.jsx)("button",{"aria-label":"Toggle Dark Mode",type:"button",className:"mb-1 mr-6",onClick:function(){return o("dark"===a||"dark"===c?"light":"dark")},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"".concat("dark"===a?"text-zinc-50":"text-zinc-900"),children:!t||"dark"!==a&&"dark"!==c?(0,r.jsx)("path",{d:"M21.752 15.002C20.5633 15.4975 19.2879 15.7518 18 15.75C12.615 15.75 8.25 11.385 8.25 6.00005C8.25 4.67005 8.516 3.40305 8.998 2.24805C7.22147 2.98916 5.70397 4.2394 4.63663 5.8413C3.56928 7.44321 2.99984 9.32513 3 11.25C3 16.635 7.365 21 12.75 21C14.6749 21.0002 16.5568 20.4308 18.1587 19.3634C19.7606 18.2961 21.0109 16.7786 21.752 15.002Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("g",{clipPath:"url(#clip0_461_7572)",children:(0,r.jsx)("path",{d:"M12 1.5V4.125M19.4247 4.57533L17.5685 6.4315M22.5 12H19.875M19.4247 19.4247L17.5685 17.5685M12 19.875V22.5M6.4315 17.5685L4.57533 19.4247M4.125 12H1.5M6.4315 6.4315L4.57533 4.57533M16.375 12C16.375 13.1603 15.9141 14.2731 15.0936 15.0936C14.2731 15.9141 13.1603 16.375 12 16.375C10.8397 16.375 9.72688 15.9141 8.90641 15.0936C8.08594 14.2731 7.625 13.1603 7.625 12C7.625 10.8397 8.08594 9.72688 8.90641 8.90641C9.72688 8.08594 10.8397 7.625 12 7.625C13.1603 7.625 14.2731 8.08594 15.0936 8.90641C15.9141 9.72688 16.375 10.8397 16.375 12Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_461_7572",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]})})})},j=function(){var e=(0,i.useContext)(f.I).context,t=(0,h.useRouter)(),n=(0,m.F)().theme;return(0,r.jsxs)("div",{className:"".concat("dark"===n?"bg-zinc-800 border-zinc-50":"bg-slate-50 border-zinc-900"," pt-4 pb-2 px-6 md:px-24 flex justify-between border-b border-opacity-10"),children:[(0,r.jsx)("button",{onClick:function(){t.push("/")},children:(0,r.jsx)(d.TR,{})}),(0,r.jsxs)("div",{className:"ml-8 ".concat("dark"===n?"text-zinc-50":"text-zinc-900"," flex flex-row -mt-1 items-center"),children:[(0,r.jsx)(d.WC,{}),(0,r.jsxs)("h1",{className:"mx-2",children:[e.completedTasks," of ",e.totalTasks]})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center ".concat("dark"===n?"text-zinc-50":"text-zinc-900"," flex flex-row -mt-1 items-center"),children:[(0,r.jsx)(p,{}),(0,r.jsx)(x,{})]})]})},b=function(){var e=new Date;return{today:e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0"),tomorrow:e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+(e.getDate()+1).toString().padStart(2,"0"),yesterday:e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+(e.getDate()-1).toString().padStart(2,"0"),upcoming:"2050-01-25",outdated:e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+(e.getDate()-14).toString().padStart(2,"0")}},g=function(e){var t=e.task,n=e.openHandler,i=e.date,s=b().today,a=(0,m.F)().theme;return(0,r.jsxs)("div",{className:"".concat("dark"===a?"text-zinc-50":"text-zinc-900"," flex flex-row mb-2 items-center w-full h-auto"),children:[(0,r.jsx)("button",{className:"flex self-start pt-1 ".concat(i&&t.date!=i&&"text-red-400"),onClick:function(){(0,l.xJ)(t.id,t.content,!t.isComplete,s,t.priority)},children:t.isComplete?(0,r.jsx)(d.he,{checkColor:"".concat("dark"===a?"black":"white")}):(0,r.jsx)(d.nQ,{})}),(0,r.jsx)("button",{onClick:function(){return n(t)},className:"flex w-full py-1",children:(0,r.jsx)("h1",{className:"".concat(t.isComplete&&"line-through"," font-extralight text-left ").concat(i&&t.date!=i&&"text-red-400"),children:t.content})})]})},v=function(e){var t=e.label1,n=e.label2,i=e.label3,s=e.onClick1,a=void 0===s?function(){}:s,o=e.onClick2,c=void 0===o?function(){}:o,l=e.onClick3,d=void 0===l?function(){}:l,u=e.isLabel1Active,x=e.isLabel2Active,f=e.isLabel3Active,h=(0,m.F)().theme;return(0,r.jsxs)("div",{className:"flex flex-grow rounded-2xl ".concat("dark"===h?"bg-zinc-700 text-zinc-50":"bg-zinc-200 text-zinc-900"),children:[(0,r.jsxs)("div",{className:"flex basis-1/3 flex-grow justify-center",children:[(0,r.jsx)("button",{onClick:function(){return a()},className:"flex flex-grow justify-center items-center rounded-l-2xl ".concat(u&&"".concat("dark"===h?"bg-zinc-50 text-zinc-900":"bg-zinc-600 text-zinc-50"," rounded-2xl py-1")),children:(0,r.jsx)("h1",{children:t})}),(0,r.jsx)("div",{className:"py-3  w-0.5 ".concat(f&&"".concat("dark"===h?"bg-zinc-800":"bg-zinc-50"))})]}),(0,r.jsxs)("div",{className:"flex basis-1/3 flex-grow justify-center",children:[(0,r.jsx)("button",{onClick:function(){return c()},className:"flex flex-grow justify-center items-center rounded-l-2xl ".concat(x&&"".concat("dark"===h?"bg-zinc-50 text-zinc-900":"bg-zinc-600 text-zinc-50"," rounded-2xl py-1")),children:(0,r.jsx)("h1",{children:n})}),(0,r.jsx)("div",{className:"py-3  w-0.5 ".concat(u&&"".concat("dark"===h?"bg-zinc-800":"bg-zinc-50"))})]}),(0,r.jsx)("div",{className:"flex basis-1/3 flex-grow justify-center",children:(0,r.jsx)("button",{onClick:function(){return d()},className:"flex flex-grow justify-center items-center rounded-l-2xl ".concat(f&&"".concat("dark"===h?"bg-zinc-50 text-zinc-900":"bg-zinc-600 text-zinc-50"," rounded-2xl py-1")),children:(0,r.jsx)("h1",{children:i})})})]})},k=function(e){var t=e.closeModal,n=e.initialRef,o=e.task,c=e.selectedDate,u=(0,i.useState)(""),x=u[0],f=u[1],h=(0,i.useState)(1),p=h[0],j=h[1],g=(0,i.useState)(c),k=g[0],y=g[1],w=(0,m.F)().theme,N=b(),C=N.today,z=N.tomorrow,T=N.upcoming;(0,i.useEffect)((function(){o?(f(o.content),j(o.priority)):(f(""),j(1))}),[o]);var S=function(){var e=(0,s.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return 0===(null===x||void 0===x?void 0:x.length)?(E(),[2]):o?[4,(0,l.xJ)(o.id,x,o.isComplete,k,p)]:[3,2];case 1:return e.sent(),[3,3];case 2:(0,l.vr)(x,k,p),e.label=3;case 3:return E(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,s.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e?[4,(0,l._5)(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return E(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),E=function(){f(""),t()};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex justify-center items-center overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",onKeyPress:function(e){"Enter"===e.key&&S()},children:(0,r.jsxs)("div",{className:"flex flex-col px-4 md:w-1/3 w-full rounded-md ".concat("dark"===w?"bg-zinc-800 text-zinc-50":"bg-zinc-50 text-zinc-900 border border-zinc-800 border-opacity-10 "),children:[(0,r.jsxs)("div",{className:"flex justify-between py-4",children:[(0,r.jsx)("h1",{className:"font-medium",children:"Task"}),(0,r.jsx)("button",{className:"bg-transparent float-right ",onClick:E,onKeyDown:E,children:(0,r.jsx)(d.Tw,{})})]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("textarea",{ref:n,placeholder:"Add your task here",className:"shadow appearance-none border rounded w-full h-24 px-2 py-2 font-extralight bg-transparent flex outline-none focus:outline-none",onChange:function(e){return f(e.target.value)},value:x,autoFocus:!0})}),(0,r.jsx)("div",{className:"pb-3 mt-6 flex flex-row",children:(0,r.jsx)(v,{label1:"Today",label2:"Tomorrow",label3:"Upcoming",onClick1:function(){return y(C)},onClick2:function(){return y(z)},onClick3:function(){return y(T)},isLabel1Active:k===C,isLabel2Active:k===z,isLabel3Active:k===T})}),(0,r.jsxs)("div",{className:"flex flex-row justify-between mt-6 mb-6",children:[(0,r.jsxs)("button",{className:"text-red-500 px-6 py-2 text-sm bg-transparent rounded-xl border-red-500 border flex flex-row ",type:"button",onClick:function(){_(null===o||void 0===o?void 0:o.id)},children:[(0,r.jsx)(d.HF,{}),(0,r.jsx)("h1",{className:"mx-2 self-center",children:"Delete"})]}),(0,r.jsxs)("button",{className:"bg-sky-500 text-sm px-6 py-2 rounded-xl flex flex-row",type:"button",onClick:S,children:[(0,r.jsx)(d.N,{}),(0,r.jsxs)("h1",{className:"mx-2 self-center",children:[" ",o?"Update":"Save"]})]})]})]})})})},y=function(){return(0,r.jsx)("div",{className:"py-6 border-t border-zinc-400 border-opacity-50 flex md:justify-start justify-center md:mt-8 mt-24 mx-6 md:mx-24 ",children:(0,r.jsx)("h1",{className:"text-zinc-400 text-sm md:text-base font-extralight",children:"\xa9 2023 offtasks.com"})})},w=function(e){var t=e.headline,n=e.onClickAdd,i=e.progressData,s=e.showCounter,a=(0,m.F)().theme;return(0,r.jsxs)("div",{className:"".concat("dark"===a?"border-b-zinc-100 text-zinc-50":"border-b-zinc-900 text-zinc-900"," container flex flex-row justify-between border-b border-opacity-20 pb-2 mb-4"),children:[(0,r.jsxs)("div",{className:"flex flex-row font-medium",children:[(0,r.jsx)("h1",{className:" flex",children:t}),s?(0,r.jsxs)("h1",{children:["\xa0- ",i.completedTasks," of ",i.allTasks]}):(0,r.jsxs)("h1",{children:["\xa0- ",i.allTasks]})]}),(0,r.jsxs)("button",{className:"text-sky-500 flex flex-row",onClick:function(){return n(null)},children:[(0,r.jsx)(d.dt,{}),(0,r.jsx)("h2",{className:"font-medium",children:"Add Task"})]})]})},N=n(1799),C=n(9396),z=n(603),T=n(5948),S=function(e){var t=e.headline,n=e.data,s=void 0===n?[]:n,a=e.openModal,o=e.statusHandler,c=e.currentDate,l=e.showCounter,u=(0,i.useState)([]),x=u[0],f=u[1];(0,i.useEffect)((function(){f(s)}),[s]);var h=x.filter((function(e){return!0===e.isComplete})).length,m=x.length,p=function(e,t,n){var r=Array.from(e),i=(0,z.Z)(r.splice(t,1),1)[0];return r.splice(n,0,i),r};return(0,r.jsxs)("div",{className:"flex flex-col mt-12 md:mt-8 container md:w-1/2",children:[(0,r.jsx)("div",{className:"container px-6",children:(0,r.jsx)(w,{headline:t,onClickAdd:a,progressData:{completedTasks:h,allTasks:m},showCounter:l})}),(0,r.jsx)("div",{className:"container -ml-8 px-6 h-96 md:h-[500px] overflow-y-scroll scrollbar",children:(0,r.jsx)(T.Z5,{onDragEnd:function(e){if(e.destination){var t=p(x,e.source.index,e.destination.index);f(t)}},children:(0,r.jsx)(T.bK,{droppableId:"droppable",children:function(e){return(0,r.jsxs)("div",(0,C.Z)((0,N.Z)({},e.droppableProps),{ref:e.innerRef,children:[x.map((function(e,t){return(0,r.jsx)(T._l,{draggableId:e.id.toString(),index:t,children:function(t){return(0,r.jsxs)("div",(0,C.Z)((0,N.Z)({ref:t.innerRef},t.draggableProps,t.dragHandleProps),{className:"flex flex-row justify-center items-start",children:[(0,r.jsx)(d.Vn,{className:"opacity-0 hover:opacity-100 transition duration-150"}),(0,r.jsx)(g,{task:e,openHandler:a,statusHandler:o,date:c})]}))}},e.id)})),e.placeholder]}))}})})})]})},_=n(9008),E=n.n(_),M=function(e){var t=e.children,n=e.title;return(0,r.jsxs)("div",{className:"md:h-screen w-screen md:fixed flex flex-col",children:[(0,r.jsxs)(E(),{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.jsx)("div",{className:"flex-initial w-screen pb-4",children:(0,r.jsx)(j,{})}),(0,r.jsx)("div",{className:"flex-grow w-screen",children:t}),(0,r.jsx)("div",{className:"flex-initial w-screen",children:(0,r.jsx)(y,{})})]})},D=function(e){var t=e.children,n=(0,h.useRouter)(),r=l._m.auth.user(),s=(0,i.useContext)(f.I).setContext,a=b(),o=a.today,c=a.yesterday,d=a.tomorrow,u=a.outdated,x=a.upcoming;(0,i.useEffect)((function(){r||n.push("/login"),(0,l.Jv)().then((function(e){return m(e)}))}),[r,n]),(0,i.useEffect)((function(){var e=l._m.from("tasks").on("*",(function(e){"DELETE"!==e.eventType&&"UPDATE"!==e.eventType&&"INSERT"!==e.eventType||(0,l.Jv)().then((function(e){return m(e)}))})).subscribe();return function(){e.unsubscribe()}}),[]);var m=function(e){if(null!=e){var t=e.filter((function(e){return e.date===o||e.date!=x&&e.date!=d&&1!=e.isComplete})).sort((function(e,t){return t.priority-e.priority})),n=e.filter((function(e){return e.date===d})).sort((function(e,t){return t.priority-e.priority})),r=e.filter((function(e){return 1!=e.isComplete&&e.date!=o&&e.date!=d&&e.date!=u&&e.date!=c})).sort((function(e,t){return t.priority-e.priority})),i=e.length,a=e.filter((function(e){return!0===e.isComplete})).length;s({todayTasks:t,tomorrowTasks:n,upcomingTasks:r,totalTasks:i,completedTasks:a})}};return t},F=function(){var e=(0,i.useRef)(),t=(0,i.useState)(null),n=t[0],s=t[1],a=(0,i.useState)(!1),o=a[0],c=a[1],l=(0,i.useState)(null),d=l[0],u=l[1],x=(0,m.F)().theme,h=b(),p=h.today,j=h.tomorrow,g=h.upcoming,v=(0,i.useContext)(f.I).context,y=function(){c(!1)},w=function(e){s(e),c(!0),u(p)},N=function(e){return"+"===e.key&&w(null),"Escape"===e.key&&y(),e};return(0,i.useEffect)((function(){"undefined"!==typeof document&&document.addEventListener("keydown",N)}),[]),(0,r.jsxs)(D,{children:[o&&(0,r.jsx)(k,{selectedDate:d,closeModal:y,initialRef:e,task:n}),(0,r.jsx)("div",{className:"w-screen h-screen \n        ".concat(o&&"contrast-50 blur-sm","\n        ").concat("dark"===x?"bg-zinc-900 ":"bg-zinc-50 "),children:(0,r.jsx)(M,{title:"Tasks",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row container ",children:[(0,r.jsx)(S,{headline:"Today",data:v.todayTasks,currentDate:p,openModal:w,showCounter:!0}),(0,r.jsx)(S,{headline:"Tomorrow",data:v.tomorrowTasks,currentDate:j,openModal:function(e){s(e),c(!0),u(j)},showCounter:!1}),(0,r.jsx)(S,{headline:"Upcoming",data:v.upcomingTasks,openModal:function(e){s(e),c(!0),u(g)}})]})})})]})}}},function(e){e.O(0,[630,892,791,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);